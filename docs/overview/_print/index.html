<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.108.0"><link rel=canonical type=text/html href=https://sogno-platform.github.io/dpsim/docs/overview/><link rel=alternate type=application/rss+xml href=https://sogno-platform.github.io/dpsim/docs/overview/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/dpsim/favicons/favicon.ico><link rel=apple-touch-icon href=/dpsim/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/dpsim/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/dpsim/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/dpsim/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/dpsim/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/dpsim/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/dpsim/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/dpsim/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/dpsim/favicons/android-192x192.png sizes=192x192><title>Overview | DPsim</title><meta name=description content="Real-Time Power System Simulation"><meta property="og:title" content="Overview"><meta property="og:description" content="Real-Time Power System Simulation"><meta property="og:type" content="website"><meta property="og:url" content="https://sogno-platform.github.io/dpsim/docs/overview/"><meta property="og:site_name" content="DPsim"><meta itemprop=name content="Overview"><meta itemprop=description content="Real-Time Power System Simulation"><meta name=twitter:card content="summary"><meta name=twitter:title content="Overview"><meta name=twitter:description content="Real-Time Power System Simulation"><link rel=preload href=/dpsim/scss/main.min.73bc65c1e18bb0cbd02b071f40b73b018bed23b1835e915c0f4f73a772a6713b.css as=style><link href=/dpsim/scss/main.min.73bc65c1e18bb0cbd02b071f40b73b018bed23b1835e915c0f4f73a772a6713b.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/dpsim/><span class="navbar-brand__logo navbar-logo"></span><span class=navbar-brand__name>DPsim</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/dpsim/docs/><span class=active>Documentation</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/dpsim/offline-search-index.ff1d02e9b34190af92c9ec71b04c8127.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=/dpsim/docs/overview/>Return to the regular view of this page</a>.</p></div><h1 class=title>Overview</h1><ul><li>1: <a href=#pg-756f6dd5e04e632df55918e89728cdc0>Architecture</a></li><li>2: <a href=#pg-6c7d93c4933efb090f6f84d8f8af8ee6>Attributes</a></li><li>3: <a href=#pg-bb26c9efd3b16b39a22d8bfbd3865c98>Scheduling</a></li></ul><div class=content><p>DPsim is a real-time capable power system simulator that supports dynamic phasor and electromagnetic transient simulation as well as continuous powerflow. It primarily targets large-scale scenarios on commercial off-the-sheld hardware that require deterministic time steps in the range of micro- to milliseconds.</p><p>DPsim supports the CIM format as native input for the description of electrical network topologies, component parameters and load flow data, which is used for initialization. For this purpose, CIM++ is integrated in DPsim.
Users interact with the C++ simulation kernel via Python bindings, which can be used to script the execution, schedule events, change parameters and retrieve results. Supported by the availability of existing Python frameworks like Numpy, Pandas and Matplotlib, Python scripts have been proven as an easy and flexible way to codify the complete workflow of a simulation from modelling to analysis and plotting, for example in Jupyter notebooks.</p><p>The DPsim simulation kernel is implemented in C++ and uses the Eigen linear algebra library. By using a system programming language like C++ and a highly optimized math library, optimal performance and real-time execution can be guaranteed.
The integration into the <a href=https://git.rwth-aachen.de/acs/public/villas/node>VILLASframework</a> allows DPsim to be used in large-scale co-simulations.</p><h2 id=licensing>Licensing</h2><p>The project is released under the terms of the <a href=https://mozilla.org/MPL/2.0/>MPL 2.0</a>.</p><h2 id=where-should-i-go-next>Where should I go next?</h2><ul><li><a href=https://sogno-platform.github.io/dpsim/docs/getting-started/ title="Getting Started">Getting Started</a>: Get started with DPsim</li><li><a href=https://sogno-platform.github.io/dpsim/docs/examples/ title=Examples>Examples</a>: Check out some example code!</li></ul></div></div><div class=td-content style=page-break-before:always><h1 id=pg-756f6dd5e04e632df55918e89728cdc0>1 - Architecture</h1><h2 id=modules-and-dependencies>Modules and Dependencies</h2><p>The figure below shows the main components of the DPsim library and their dependencies on other software projects.
All functionality is implemented in the C++ core, which can be used standalone or together with the Python interface.
The Python interface is a thin wrapper of the C++ core.
Jupyter notebooks can either use the DPsim Python interface to run simulations or call executables implemented in C++.
The data analysis and plotting is always done in Python using common libraries like Matplotlib.
To collect the simulation results from within Python, one can use the villas-dataprocessing Python package.</p><p><img src=dpsim_modules.svg alt=image></p><p>Another approach to get data in or out of DPsim is the VILLAS interface, which does not depend on Python at all.
The main purpose of the VILLAS interface is to exchange data during the simulation runtime, for example, in real-time simulation experiments.
The data could be send to other simulators, hardware or other software components like databases.
Storing the data in databases can be another way of managing (also offline) simulation results if the Python CSV method is not desireable.</p><p>The CIM reader is based on the CIM++ library and provides a comfortable alternative to defining the grid manually in C++ or Python.
In principle, it calls the same functions to create elements, which are also used in the C++ defined example scenarios, but automatically.
DPsim also provides a way to visualize the defined networks before simulation.</p><p>The main solver of DPsim is currently the MNA solver because it enables a rather deterministic computation time per simulation time step, which is necessary for real-time simulation.
Apart from that, it is also well established in offline circuit simulation.
The only dependency of the MNA solver is the linear algebra library Eigen.
For some component models, it is possible to use the Sundials ODE solver in combination with the MNA solver. In that case, the component is solved by the ODE solver whereas the network is still handled by the MNA solver.
A DAE solver is currently under development.
Its main purpose will be offline simulation, for example, to provide reference results where simulation runtime and real-time execution are not relevant.</p><p>The component models depend mostly on the Eigen library.
Even if components are used in combination with Sundials ODE / DAE solvers, we try to keep the specific functions required by these solvers independent of the Sundials package.</p><h2 id=class-hierarchy>Class Hierarchy</h2><p>The <code>Simulation</code> class holds references to instances of <code>Interface</code>, <code>Solver</code>, <code>Logger</code> and <code>SystemTopology</code>.
For a simulation scenario, the minimum description would include a <code>SystemTopology</code> and a solver type.
The <code>Solver</code> instance is then created by the <code>Simulation</code>.</p><p><img src=dpsim_classes_simulation.svg alt=image></p><p>An important function of the <code>Simulation</code> is to collect all tasks, which have to be executed during the simulation.
These tasks include computation steps of the individual power system component models as well as read and write tasks of the interfaces and logging variables etc.
Before the scheduling is done, <code>Simulation</code> calls a function, e.g. <code>getTasks()</code>, in order to retrieve the tasks from instances of the four classes mentioned previously.
The power system model element tasks are collected by the <code>Solver</code> instances and relayed to the <code>Simulation</code>.</p><p>All power system element classes inherit from the <code>IdentifiedObject</code> class.
This class corresponds with the <code>IdentifiedObject</code> of the IEC61970 CIM and has a <code>uid</code> and <code>name</code> attribute as well.</p><p><img src=dpsim_classes_identifiedobject.svg alt=image></p><p>The next layer of specialization includes information on the topological connection between network elements.
An electrical bus and network nodes in general are represented by the <code>TopologiclaNode</code> class.
The connection of electrical components, <code>TopologicalPowerComp</code>, is managed via terminals of type <code>TopologicalTerminal</code>.
These three types describe the <em>electrical</em> connections of the network, which are bidirectional and include voltages and currents.
The signal type elements, <code>TopologicalSignalComp</code>, can only have unidirectional components, which are not expressed using node and terminals.
Instead, the attribute system is used to define signal type connections.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-6c7d93c4933efb090f6f84d8f8af8ee6>2 - Attributes</h1><p>Attributes, instances of the <code>Attribute</code> class, serve multiple purposes in DPsim:</p><ul><li>add meta information about variables, like read and write access</li><li>in combination with tasks, they are the input required by the scheduler</li><li>connect components by pointing an attribute of one component to another component&rsquo;s member variable</li><li>add additional getter / setter lambda functions to variables</li><li>add reflexion, which is not supported by C++ directly</li></ul><p>Let&rsquo;s have a look at some code snippets that use attributes.</p><p>Classes support attributes by inheriting from <code>AttributeList</code>:</p><pre><code>class IdentifiedObject: virtual public AttributeList {
  ...
}
</code></pre><p>New attributes are usually registered in the constructor of a class:</p><pre><code>DP::Ph1::Inductor::Inductor(String uid, String name, Logger::Level logLevel)
  ...
    addAttribute&lt;Real&gt;(&quot;L&quot;, &amp;mInductance, Flags::read | Flags::write);
}
</code></pre><p>Here, the attribute has the name <code>L</code> and points to the member variable <code>mInductance</code>.
Besides, the attribute enables reading and writing this variable.</p><p>To access an attribute, you need to know its name and the component it belongs to.
For example, adding the voltage at node <code>n1</code> to the logger for a simulation can be done as follows:</p><pre><code>logger-&gt;addAttribute(&quot;v1&quot;, n1-&gt;attributeMatrixComp(&quot;v&quot;));
</code></pre><p>Note that the voltage is a complex matrix in this case.
Since we would like to use Eigen matrix specific methods in the logger, the <code>attributeMatrixComp</code> function is used to return the attribute already casted to a complex matrix type.</p><p>Attributes are also used to determine dependencies of tasks on data, which is information required by the scheduler.
A task describing its dependencies on attributes could look like this.</p><pre><code>class MnaPostStep : public Task {
    public:
      MnaPostStep(Inductor&amp; inductor, Attribute&lt;Matrix&gt;::Ptr leftVector) :
        Task(inductor.mName + &quot;.MnaPostStep&quot;),
        mInductor(inductor), mLeftVector(leftVector) {
        mAttributeDependencies.push_back(mLeftVector);
        mModifiedAttributes.push_back(mInductor.attribute(&quot;v_intf&quot;));
        mModifiedAttributes.push_back(mInductor.attribute(&quot;i_intf&quot;));
      }
      void execute(Real time, Int timeStepCount);
    private:
      Inductor&amp; mInductor;
      Attribute&lt;Matrix&gt;::Ptr mLeftVector;
    };
</code></pre><p>Here, the MNA post step depends on the solution vector of the system, <code>leftVector</code>, and modifies <code>v_intf</code> and <code>i_intf</code>.
Therefore, this task needs to be scheduled after the system solution that computes <code>leftVector</code> and before tasks that require the voltage and current interface vectors of the inductance, e.g. the task logging these values.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-bb26c9efd3b16b39a22d8bfbd3865c98>3 - Scheduling</h1><p>DPsim implements level scheduling.
A task T4 that depends on data modified by task T1 is scheduled to the level following the level of task T1.
In the simplest case, all tasks of a level have to be finished before tasks of the next level are started.</p><p><img src=task_graph_levels.svg alt=image></p><p>The dependencies of tasks on data are determined by referencing the attributes that are read or modified by the task.
The scheduler computes the schedule prior to the simulation from the task dependency graph resulting from the tasks&rsquo; data dependencies.</p></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack><a class=text-white target=_blank rel=noopener href=https://slack.lfenergy.org/ aria-label=Slack><i class="fab fa-slack"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="GitHub Discussions" aria-label="GitHub Discussions"><a class=text-white target=_blank rel=noopener href=https://github.com/sogno-platform/dpsim/discussions aria-label="GitHub Discussions"><i class="fab fa-github"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/sogno-platform/dpsim aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="RWTH GitLab" aria-label="RWTH GitLab"><a class=text-white target=_blank rel=noopener href=https://git.rwth-aachen.de/acs/public/simulation/dpsim/dpsim aria-label="RWTH GitLab"><i class="fab fa-gitlab"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2022 The DPsim Authors All Rights Reserved</small></div></div></div></footer></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.3/dist/katex.min.css integrity="sha512-6VMVcy7XQNyarhVuiL50FzpgCFKsyTd6YO93aaQEyET+BNaWvj0IgKR86Bf6+AmWczxAcSnL+JGjo+iStgO1gQ==" crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.3/dist/katex.min.js integrity="sha512-b9IKj4LCNrtCPBhceRcoYOHWW/S2q9fpl7iAJlyxYpykRj1SKM7FE9+E0NEnJ8g8ni47LBr2GuX9qzg/xeuwzQ==" crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.3/dist/contrib/auto-render.min.js integrity="sha512-iWiuBS5nt6r60fCz26Nd0Zqe0nbk1ZTIQbl3Kv7kYsX+yKMUFHzjaH2+AnM6vp2Xs+gNmaBAVWJjSmuPw76Efg==" crossorigin=anonymous onload='renderMathInElement(document.body,{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"},{display:!0,left:"\\[",right:"\\]"}]})'></script><script src=/dpsim/js/main.min.2aff983e9d0d8ecff9ed53e14b657216e2d8d2aff059bf4a5651283020995f1b.js integrity="sha256-Kv+YPp0Njs/57VPhS2VyFuLY0q/wWb9KVlEoMCCZXxs=" crossorigin=anonymous></script>
<script src=/dpsim/js/tabpane-persist.js></script></body></html>